---

- name: docker | Add docker repository key
  apt_key: keyserver=p80.pool.sks-keyservers.net id=58118E89F3A912897C070ADBF76221572C52609D
           state=present

#sudo apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D

- name: docker | Add docker repository
  apt_repository:   
     repo='https://apt.dockerproject.org/repo ubuntu-trusty main' 
     state=present

- name: Apt cache update
  apt: update_cache=yes cache_valid_time=3600 

 
- name: Install linux-image-extra
  apt: name=linux-image-extra state=present update_cache=yes cache_valid_time=300 

- name: Install linux-image-extra-$(uname -r)
  apt: name=linux-image-extra-$(uname -r) state=present update_cache=yes cache_valid_time=300 
  
- name: Install apparmor
  apt: name=apparmor state=present update_cache=yes cache_valid_time=300    

- name: Install docker-engine
  apt: name=docker-engine state=present update_cache=yes cache_valid_time=300 
   
 
# service docker start
 
 
 #if ufw installed:
 #DEFAULT_FORWARD_POLICY="ACCEPT"

#start on boot:
#sudo systemctl enable docker
