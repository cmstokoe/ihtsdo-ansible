
# Install the package "mysql-server"
- name: Install mysql server
  apt: name=mysql-server state=present

# Install the package "python-mysqldb"
- name: Install mysql python helper
  apt: name=python-mysqldb state=present

# Create a new database with name specified per host
- mysql_db: name={{ rvf_master_schema_name }} state=present

# Creates database user 'rvf_user' with all database privileges and 'WITH GRANT OPTION'
- mysql_user: name={{ rvf_jdbc_username }} password={{ rvf_jdbc_password }} priv=*.*:ALL,GRANT state=present

# Configure mysql server so that table names are stored in lower case, and access is case insensitive
- lineinfile: dest=/etc/mysql/my.cnf line="lower_case_table_names=1"

- name: Restart MySQL
  action: service name=mysql state=restarted
  tags: common