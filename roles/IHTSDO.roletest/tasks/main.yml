---
#include system vars
#- include: "{{systemchoice}}"
- include: "{{role_path}}/../tempsystem/systemchoice.yml"

- debug: msg="sys_type  =  {{ sys_type }} "
- debug: msg="version_term_serv  =  {{ version_term_serv }} "
- debug: msg="Role path  =  {{role_path}} "

- debug: msg="sys_type  =  {{ sys_type }} "

#- name: Install NewRelic Monitoring Agent
#  unarchive: src="https://nexus.ihtsdotools.org/content/repositories/thirdparty/newrelic/newrelic-java/3.28.0/newrelic-java-3.28.0.zip" dest="/opt" copy=no



- name: download zip file if url is set
  get_url: force=no url={{active_mq_dl_url}}/{{active_mq_dl_file}} dest={{active_mq_dl_dir}}/{{active_mq_dl_file}} validate_certs=no mode=0440
  when: dlfile.stat.exists == False


#- debug: msg="test_dir  =  {{ test_dir }} "

#- name: see if test dir exists
#  stat: path={{test_dir}}
#  register: p  
 
#- debug: msg="test_dir_exists.stat.exists  =  {{ p.stat.exists }} " 

#- debug: msg="Path exists and is a directory"
#  when: p.stat.isdir is defined and p.stat.isdir
  
#- debug: msg="Path exists and is a directory size =  {{ p.stat.size }} "
#  when: p.stat.isdir is defined and p.stat.isdir  
  
#- find: paths="{{test_dir}}"  
#  register: f
  
#- debug: msg="f.matched  =  {{ f.matched }} " 


#- debug: msg="p.stat.isdir  =  {{ p.stat.isdir }} " 
#- debug: msg="p.stat.size  =  {{ p.stat.size }} " 